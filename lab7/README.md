# Лабораторная работа 7

Программа применяет алгоритм повышения резкости Contrast Adaptive Sharpening к изображениям PNM P5 и P6.

## Описание алгоритма

Алгоритм AMDFidelity CAS применяется для повышения резкости изображения, то есть улучшения различимости деталей.

Алгоритм применяется отдельно к каждому каналу изображения. Рассматриваются все пиксели изображения, кроме крайних. Для каждого пикселя рассматривается окрестность 3x3 пикселя:

```
+-+-+-+
|A|B|C|
+-+-+-+
|D|E|F|
+-+-+-+
|G|H|I|
+-+-+-+
```

Выше пример окрестности для пикселя E. У пикселей A-I рассматриваются яркости — вещественные значения от 0 до 1. Далее подсчитывается ряд величин.

Мягкий минимум и максимум:
smin = min( B, D, E, F, H )
smax = max( B, D, E, F, H )

Минимум и максимум для окрестности:
nmin = min( smin, A, C, G, I )
nmax = max( smax, A, C, G, I )

Вес ядра:
w = - sqrt( min( nmin, 2 - nmax ) / nmax ) / ( 8 - 3 * sharpen )

Результирующая яркость центрального пикселя:
b = ( w( B + D + F + H ) + E ) / ( 4w + 1 )

Переменная sharpen в формуле выше — вещественное значение от 0 до 1, передаваемое алгоритму.


## Использование

```shell
./lab7.exe <input> <output> <sharpen>
```

input - имя входного файла
output - имя выходного файла
sharpen - вещественное значение от 0 до 1

## Сборка через Meson + Ninja

```shell
meson builddir
cd builddir
ninja
```
